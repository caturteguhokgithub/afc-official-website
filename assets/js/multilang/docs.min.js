// document.querySelectorAll(".change-language").forEach(function (e) {
//  e.addEventListener("click", function () {
//   document.querySelectorAll(".change-language").forEach(function (e) {
//    e.children[0].classList.remove("active");
//   }),
//    document.querySelectorAll(".load").forEach(function (e) {
//     e.style.display = "none";
//    }),
//    (document.querySelector("." + e.dataset.action).style.display = "block"),
//    e.children[0].classList.add("active"),
//    e.dataset.switch && buildInstance(e.dataset.action.substr(5));
//  });
// });
// var buildInstance = function (e) {
//  var n = Translate({ lang: e, className: "translate" });
//  //  console.log(n.getLang()), console.log(n.get("greetings.good.morning"));
// };
// buildInstance("id");

// function changeLangId() {
//  document.querySelectorAll(".long-lang").forEach(function (e) {
//   e.classList.remove("selected");
//  });
// }
// function changeLangEn() {
//  document.querySelectorAll(".long-lang").forEach(function (e) {
//   e.classList.add("selected");
//  });
// }

document.querySelectorAll(".change-language").forEach(function (e) {
  e.addEventListener("click", function () {
    // Remove active class from all language buttons
    document.querySelectorAll(".change-language").forEach(function (e) {
      e.children[0].classList.remove("active");
    });

    // Hide all language content
    document.querySelectorAll(".load").forEach(function (e) {
      e.style.display = "none";
    });

    // Show the selected language content
    document.querySelector("." + e.dataset.action).style.display = "block";

    // Add active class to the selected button
    e.children[0].classList.add("active");

    // Store the selected language in localStorage
    localStorage.setItem("selectedLanguage", e.dataset.action.substr(5));

    // Build the translation instance if needed
    e.dataset.switch && buildInstance(e.dataset.action.substr(5));
  });
});

var buildInstance = function (e) {
  var n = Translate({ lang: e, className: "translate" });
};

// On page load, set the language based on localStorage
window.onload = function () {
  var storedLang = localStorage.getItem("selectedLanguage");
  if (storedLang) {
    // Set the language to the stored value
    buildInstance(storedLang);
    updateActiveLanguageUI(storedLang); // Update UI based on stored language
  } else {
    // Default language if none is stored
    buildInstance("id");
    updateActiveLanguageUI("id"); // Set default UI
  }
};

function changeLangId() {
  localStorage.setItem("selectedLanguage", "id"); // Store selected language
  updateActiveLanguageUI("id"); // Update UI
}

function changeLangEn() {
  localStorage.setItem("selectedLanguage", "en"); // Store selected language
  updateActiveLanguageUI("en"); // Update UI
}

function updateActiveLanguageUI(lang) {
  document.querySelectorAll(".change-language").forEach(function (e) {
    e.children[0].classList.remove("active"); // Remove active class from all
    if (e.id === (lang === "id" ? "id-lang" : "en-lang")) {
      e.children[0].classList.add("active"); // Add active class to selected
    }
  });
}
